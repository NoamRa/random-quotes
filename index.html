<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8" />
  <style type="text/css">
    * {
      box-sizing: border-box;
    }

    main {
      width: 80vw;
    }

    #content {
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    blockquote {
      font-size: 3rem;
    }

    cite {
      align-self: flex-end;
      font-size: 2rem;
    }
  </style>
</head>

<body>
  <main>
    <div id="content">Loading...</div>
    <button id="reload">Get another quote</button>
  </main>
  <footer>Inspirational quotes provided by <a href="https://zenquotes.io/" target="_blank">ZenQuotes API</a></footer>
</body>

<script type="text/javascript">
  const QUOTES_URL = window.location.hostname === 'localhost'
    ? 'https://api.allorigins.win/raw?url=https://zenquotes.io/api/random' // use https://allorigins.win to remove cors
    : "https://noam-quotes.netlify.app/quote" // redirected from https://zenquotes.io/ using netlify. see netlify.toml

  function updateHtml(quote, author) {
    const content = document.getElementById("content");
    content.innerHTML = `<blockquote>${quote}</blockquote><cite>&mdash; ${author}</cite>`;
  }

  async function getQuote() {
    fetch(QUOTES_URL)
      .then((res) => res.json())
      // .then(d => { console.log(d); return d })
      .then((data) => data[0])
      .then(({ q, a }) => updateHtml(q, a))
      .catch(console.error);
  }

  document.getElementById("reload").addEventListener("click", getQuote);

  getQuote();
</script>

</html>